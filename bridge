#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export PYTHONPATH="${ROOT_DIR}/src${PYTHONPATH:+:${PYTHONPATH}}"

# Prefer repo venv when present so `doctor` checks reflect the real runtime.
if [ -x "${ROOT_DIR}/.venv/bin/python" ]; then
  exec "${ROOT_DIR}/.venv/bin/python" -m bridge.cli "$@"
fi

exec python3 -m bridge.cli "$@"
